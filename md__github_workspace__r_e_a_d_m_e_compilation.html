<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ExternalMedia: Compilation guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ExternalMedia
   &#160;<span id="projectnumber">3.3.0</span>
   </div>
   <div id="projectbrief">A framework for Modelica.Media-compatible fluid properties</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Compilation guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md8"></a>
Quick-start guide</h1>
<p>The heavy-lifting regarding the project configuration is done using the CMake file <code>CMakeLists.txt</code>, which makes the <a href="https://cmake.org/">CMake software</a> a prerequisite for compiling ExternalMedia.</p>
<p>Once you have installed CMake and can access it from a command prompt, you can go to the root folder of the source code and run:</p>
<div class="fragment"><div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release</div>
</div><!-- fragment --><p>Please note that there is no typing mistake in the lines above. The current version of ExternalMedia requires you to run the configure step twice. Now you should have a working project configuration and the actual compilation can be triggered using:</p>
<div class="fragment"><div class="line">cmake --build build --config Release --target install</div>
</div><!-- fragment --><p>By default, the libraries are installed in a subfolder with a name that is determined from the current operating system and the compiler, possible combinations are:</p><ul>
<li><code>Modelica/ExternalMedia ${APP_VERSION}/Resources/Library/win32/vs2015</code></li>
<li><code>Modelica/ExternalMedia ${APP_VERSION}/Resources/Library/win64/vs2019</code></li>
<li><code>Modelica/ExternalMedia ${APP_VERSION}/Resources/Library/linux64/gcc81</code></li>
</ul>
<p>If you would like to skip the compiler part and make the current configuration the default for the platform, you can use this command below:</p>
<div class="fragment"><div class="line">cmake --build build --config Release --target install-as-default</div>
</div><!-- fragment --><p>You can override these settings manually using the command line switches for <code>MODELICA_PLATFORM</code> and <code>MODELICA_COMPILER</code>. The command <code>cmake -B build -S Projects -DMODELICA_PLATFORM:STRING=mingw64 -DMODELICA_COMPILER:STRING=</code> would for example configure the installation folder to <code>Modelica/ExternalMedia ${APP_VERSION}/Resources/Library/mingw64</code>, which is the preferred search path for OpenModelica that supports side-by-side installations with other compilers and configuration that support other Modelica tools.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Selecting the fluid property libraries</h1>
<p>You can disable and enable the FluidProp and the CoolProp integration with command line switches.</p>
<p>The recommended configuration step for Windows systems is</p>
<div class="fragment"><div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release -DADD_FLUIDPROP_SHARED:BOOL=ON -DADD_COOLPROP_OBJECT:BOOL=ON</div>
<div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release -DADD_FLUIDPROP_SHARED:BOOL=ON -DADD_COOLPROP_OBJECT:BOOL=ON</div>
</div><!-- fragment --><p>... and for all other systems, you probably want to use</p>
<div class="fragment"><div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release -DADD_FLUIDPROP_SHARED:BOOL=OFF -DADD_COOLPROP_OBJECT:BOOL=ON</div>
<div class="line">cmake -B build -S Projects -DCMAKE_BUILD_TYPE=Release -DADD_FLUIDPROP_SHARED:BOOL=OFF -DADD_COOLPROP_OBJECT:BOOL=ON</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Building OpenModelica libraries</h1>
<ul>
<li>Get the OMDEV environment from the SVN repository: <a href="https://openmodelica.org/svn/OpenModelicaExternal/trunk/tools/windows/OMDev">https://openmodelica.org/svn/OpenModelicaExternal/trunk/tools/windows/OMDev</a> user: anonymous pass: none</li>
<li>Install OMDEV in the C:\OMDev path</li>
<li>Start C:\OMDev\tools\msys\msys.bat (You should get a command window pop up that looks like the emulation of a unix prompt - because it is)</li>
<li>$ mount d:/Path_to_your_ExternalMediaLibrary_working_copy /ExternalMediaLibrary</li>
<li>$ cd /ExternalMediaLibrary/</li>
<li>$ cmake -B build -S Projects -G "MSYS Makefiles" -DCMAKE_BUILD_TYPE=Release</li>
<li>$ cmake &ndash;build build &ndash;target install</li>
</ul>
<p>This will build the static gcc library and copy it and the externalmedia.h header files in the Resource directories of the Modelica packages, so it can be used right away by just loading the Modelica package in OMC. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
